---
import CommonHeaderSection from "../common/CommonHeaderSection.astro";
import ServiceCard from "../common/ServiceCard.astro";
import Discuss from "../../assets/services-icons/discussion-with-customers.png";
import Planning from "../../assets/services-icons/our-planning.png";
import Making from "../../assets/services-icons/compelling-videos.png";
import Polishing from "../../assets/services-icons/polishing.png";
const services = [
  {
    title: "Book Writing",
    description:
      "Beginning from the instant that you have an idea for a written work, Nixxon Publishers Writing is here to help you bring it to life with our range of specialized services. Whether you need book writing, editing, or marketing, we have you covered.",
    icon: Discuss,
  },
  {
    title: "Book Publishing",
    description:
      "Beginning from the instant that you have an idea for a written work, Nixxon Publishers Writing is here to help you bring it to life with our range of specialized services. Whether you need book writing, editing, or marketing, we have you covered.",
    icon: Planning,
  },
  {
    title: "Article Publication",
    description:
      "Beginning from the instant that you have an idea for a written work, Nixxon Publishers Writing is here to help you bring it to life with our range of specialized services. Whether you need book writing, editing, or marketing, we have you covered.",
    icon: Making,
  },
  {
    title: "Cover Design",
    description:
      "Beginning from the instant that you have an idea for a written work, Nixxon Publishers Writing is here to help you bring it to life with our range of specialized services. Whether you need book writing, editing, or marketing, we have you covered.",
    icon: Polishing,
  },
];
---

<section id="publisher-services" class="app-max-width">
  <CommonHeaderSection
    title="Nixxon Publishers Writing Services"
    subtitle="Our Complete Support Services Mean You Won't Have to Lift Anything!"
    description="Explore a publication experience that is completely smooth with Nixxon Publishers Writing. We offer a wide range of services that are tailored to meet the specific needs of each individual creator, including skilled textual modification, attractive cover design, and smart marketing."
  />

  <!-- Swiper container -->
  <div class="swiper services-swiper mx-auto">
    <div class="swiper-wrapper pb-16">
      <!-- Individual slides -->

      {
        services.map((service) => (
          <div class="swiper-slide">
            <ServiceCard
              title={service.title}
              description={service.description}
              iconImage={service.icon}
            />
          </div>
        ))
      }
    </div>

    <!-- Add pagination -->
    <div class="swiper-pagination"></div>
  </div>
</section>

<!-- Import Swiper CSS -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>

<style>
  .swiper-slide {
    height: auto;
    display: flex;
    justify-content: center;
    box-sizing: border-box; /* Ensure padding is included in width calculation */
  }

  .services-swiper {
    width: 100%;
    padding: 20px 0;
    overflow: hidden;
    position: relative;
  }

  .swiper-pagination {
    position: relative;
    bottom: 0;
    margin-top: 20px;
  }

  /* Fix for slides alignment */
  .swiper-wrapper {
    display: flex;
    align-items: stretch;
  }

  /* Change active pagination bullet color */
  :global(.swiper-pagination-bullet-active) {
    background-color: #ff002d !important;
  }
</style>

<script>
  import Swiper from "swiper";
  import { Pagination, Autoplay } from "swiper/modules";

  document.addEventListener("DOMContentLoaded", () => {
    const swiper = new Swiper(".services-swiper", {
      modules: [Pagination, Autoplay],
      slidesPerView: 1,
      spaceBetween: 20,
      slidesPerGroup: 1,
      loop: false,
      centeredSlides: false,
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
        dynamicBullets: true,
      },
      breakpoints: {
        640: {
          slidesPerView: 2,
          spaceBetween: 20,
          slidesPerGroup: 2,
        },
        768: {
          slidesPerView: 3,
          spaceBetween: 20,
          slidesPerGroup: 3,
        },
        1024: {
          slidesPerView: 3,
          spaceBetween: 20,
          slidesPerGroup: 3,
        },
        1440: {
          slidesPerView: 4,
          spaceBetween: 5,
          slidesPerGroup: 4,
        },
        1920: {
          slidesPerView: 5,
          spaceBetween: 10,
          slidesPerGroup: 5,
        },
      },
      on: {
        // Force update on initial load to fix alignment issues
        init: function () {
          this.update();
          setTimeout(() => {
            this.update();
          }, 100);
        },
        resize: function () {
          this.update();
        },
      },
    });
  });
</script>

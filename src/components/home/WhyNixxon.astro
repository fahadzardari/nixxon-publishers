<section
  id="why-nixxon-section"
  class="app-max-width relative flex flex-col items-center justify-center py-[3.33dvw] text-white"
>
  <!-- Your content goes here -->
  <h1
    id="why-nixxon-heading"
    class="text-center text-xl md:text-2xl xl:text-3xl canvas:text-4xl 2xl:text-5xl font-bold mb-2"
  >
    Why Choose Nixxon Publishers
  </h1>
  <p
    id="why-nixxon-description"
    class="text-center text-[10px] md:text-xs w-[85%] xl:text-base 2xl:text-lg max-w-[974px] 2xl:max-w-[1100px]"
  >
    For eBooks, it's a good idea to use ghostwriters. The audience wants your
    work to be eloquent, comprehensible, and fascinating. The best information
    in the world won't get read unless it's presented in an appealing manner.
  </p>

  <!-- Card container with swiper for mobile and flex for larger screens -->
  <div
    id="why-nixxon-cards"
    class="swiper why-nixxon-swiper mt-6 w-full px-4 md:px-0"
  >
    <div class="swiper-wrapper why-nixxon-wrapper">
      <div class="swiper-slide">
        <div
          id="why-nixxon-card-1"
          class="border flex flex-col rounded-lg max-w-[250px] xl:max-w-[320px] 2xl:max-w-[350px] px-4 pb-1 mx-auto"
        >
          <h3 class="text-[80px] font-bold text-white/30">01</h3>
          <h4
            class="-mt-12 font-semibold mb-4 text-sm xl:text-base 2xl:text-lg"
          >
            Unlimited Revisions
          </h4>
          <p class="text-[10px] xl:text-xs canvas:text-sm 2xl:text-base">
            We've simplified the process of writing a book. Once in a while,
            you'll have an epiphany regarding a chapter, a character's
            development, or the entire plot. In order to ensure that the final
            product meets your expectations, we offer unlimited modifications
          </p>
        </div>
      </div>

      <div class="swiper-slide">
        <div
          id="why-nixxon-card-2"
          class="border flex flex-col rounded-lg max-w-[250px] xl:max-w-[320px] 2xl:max-w-[350px] px-4 pb-1 mx-auto"
        >
          <h3 class="text-[80px] font-bold text-white/30">02</h3>
          <h4
            class="-mt-12 font-semibold mb-4 text-sm xl:text-base 2xl:text-lg"
          >
            Experienced Designers
          </h4>
          <p class="text-[10px] xl:text-xs canvas:text-sm 2xl:text-base">
            We've simplified the process of writing a book. Once in a while,
            you'll have an epiphany regarding a chapter, a character's
            development, or the entire plot. In order to ensure that the final
            product meets your expectations, we offer unlimited modifications
          </p>
        </div>
      </div>

      <div class="swiper-slide">
        <div
          id="why-nixxon-card-3"
          class="border flex flex-col rounded-lg max-w-[250px] xl:max-w-[320px] 2xl:max-w-[350px] px-4 pb-1 mx-auto"
        >
          <h3 class="text-[80px] font-bold text-white/30">03</h3>
          <h4
            class="-mt-12 font-semibold mb-4 text-sm xl:text-base 2xl:text-lg"
          >
            Award-Winning Writers
          </h4>
          <p class="text-[10px] xl:text-xs canvas:text-sm 2xl:text-base">
            We've simplified the process of writing a book. Once in a while,
            you'll have an epiphany regarding a chapter, a character's
            development, or the entire plot. In order to ensure that the final
            product meets your expectations, we offer unlimited modifications
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>

<style>
  section {
    background-image: url("../../assets/common/why-nixxon.png");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }

  /* Swiper styles */
  .why-nixxon-swiper {
    width: 100%;
    padding: 20px 0;
  }

  .why-nixxon-swiper .swiper-slide {
    display: flex;
    justify-content: center;
    align-items: center;
    height: auto;
  }

  /* Desktop styles for card layout */
  @media (min-width: 768px) {
    .why-nixxon-wrapper {
      display: flex !important;
      flex-wrap: nowrap;
      justify-content: center;
      align-items: stretch;
      gap: 30px;
    }

    .why-nixxon-wrapper .swiper-slide {
      width: auto !important;
      height: auto !important;
      flex: 0 0 auto;
    }
  }
</style>

<script>
  import gsap from "gsap";
  import SplitType from "split-type";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import Swiper from "swiper";
  import { Autoplay } from "swiper/modules";

  // Register ScrollTrigger plugin
  gsap.registerPlugin(ScrollTrigger);

  // Wait for DOM to be fully loaded
  document.addEventListener("DOMContentLoaded", () => {
    // Initialize swiper only for mobile
    let swiper;

    function initSwiper() {
      if (window.innerWidth < 768) {
        if (!swiper || swiper.destroyed) {
          swiper = new Swiper(".why-nixxon-swiper", {
            modules: [Autoplay],
            slidesPerView: 1,
            spaceBetween: 20,
            centeredSlides: true,
            loop: true,
            autoplay: {
              delay: 3000,
              disableOnInteraction: false,
            },
            breakpoints: {
              640: {
                slidesPerView: 2,
                spaceBetween: 20,
              },
            },
          });
        }
      } else if (swiper && !swiper.destroyed) {
        // Destroy swiper on desktop
        swiper.destroy(true, true);
      }
    }

    // Initialize on load
    initSwiper();

    // Re-initialize on resize
    window.addEventListener("resize", initSwiper);

    // Split heading text for character animation
    const headingText = new SplitType("#why-nixxon-heading", {
      types: "chars,words",
    });

    // Create timeline
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: "#why-nixxon-section",
        start: "top 80%",
        toggleActions: "play none none none",
      },
    });

    // Animate heading with split characters
    tl.from(headingText.chars, {
      opacity: 0,
      y: 20,
      stagger: 0.02,
      duration: 0.8,
      ease: "power2.out",
    })

      // Animate main description
      .from(
        "#why-nixxon-description",
        {
          opacity: 0,
          y: 30,
          duration: 0.8,
          ease: "power2.out",
        },
        "-=0.4",
      )

      // Animate swiper with cards
      .from(
        "#why-nixxon-cards",
        {
          opacity: 0,
          y: 50,
          duration: 0.8,
          ease: "power2.out",
        },
        "-=0.6",
      );

    // Add hover animations for cards
    const cards = document.querySelectorAll(
      "#why-nixxon-card-1, #why-nixxon-card-2, #why-nixxon-card-3",
    );

    cards.forEach((card) => {
      card.addEventListener("mouseenter", () => {
        gsap.to(card, {
          y: -10,
          scale: 1.02,
          duration: 0.3,
          ease: "power2.out",
        });
      });

      card.addEventListener("mouseleave", () => {
        gsap.to(card, {
          y: 0,
          scale: 1,
          duration: 0.3,
          ease: "power2.out",
        });
      });
    });
  });
</script>
